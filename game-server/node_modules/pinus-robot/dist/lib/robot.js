"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const agent_1 = require("./agent/agent");
const server_1 = require("./master/server");
const http_1 = require("./console/http");
/**
 * export to developer prototype
 *
 * @param {Object} config
 * include deal with master and agent mode
 *
 * param include mode
 *
 */
class Robot {
    constructor(conf) {
        this.master = null;
        this.agent = null;
        this.conf = conf;
    }
    /*
   * run master server
   *
   * @param {String} start up file
   *
   */
    runMaster(mainFile) {
        let conf = {}, master;
        conf.clients = this.conf.clients;
        conf.mainFile = mainFile;
        this.master = new server_1.Server(conf);
        this.master.listen(this.conf.master.port);
        http_1.HTTP_SERVER.start(`http://${this.conf.master.host}:${this.conf.master.port}`, this.conf.master.webport);
    }
    /**
     * run agent client
     *
     * @param {String} script
     *
     */
    runAgent(scriptFile) {
        let conf = {};
        conf.master = this.conf.master;
        conf.scriptFile = scriptFile;
        this.agent = new agent_1.Agent(conf);
        this.agent.start();
    }
    restart() {
        if (this.agent != null) {
            this.agent.reconnect(true);
        }
    }
}
exports.Robot = Robot;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9ib3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saWIvcm9ib3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx5Q0FBK0M7QUFDL0MsNENBQW1EO0FBQ25ELHlDQUEyQztBQVEzQzs7Ozs7Ozs7R0FRRztBQUNIO0lBS0UsWUFBWSxJQUFjO1FBSDFCLFdBQU0sR0FBVyxJQUFJLENBQUM7UUFDdEIsVUFBSyxHQUFVLElBQUksQ0FBQztRQUdsQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNuQixDQUFDO0lBRUQ7Ozs7O0tBS0M7SUFDRCxTQUFTLENBQUMsUUFBZ0I7UUFDeEIsSUFBSSxJQUFJLEdBQUcsRUFBZ0IsRUFBRSxNQUFNLENBQUM7UUFDcEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUNqQyxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQy9CLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFDLGtCQUFXLENBQUMsS0FBSyxDQUFDLFVBQVUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxFQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzNHLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILFFBQVEsQ0FBQyxVQUFrQjtRQUN6QixJQUFJLElBQUksR0FBRyxFQUFjLENBQUM7UUFDMUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksYUFBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELE9BQU87UUFDTCxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxFQUFFO1lBQ3RCLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzVCO0lBQ0gsQ0FBQztDQUNGO0FBM0NELHNCQTJDQyJ9