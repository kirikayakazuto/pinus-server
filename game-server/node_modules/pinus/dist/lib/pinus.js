"use strict";
/*!
 * Pinus
 * Copyright(c) 2012 xiechengchao <xiecc@163.com>
 * MIT Licensed
 */
Object.defineProperty(exports, "__esModule", { value: true });
const application_1 = require("./application");
const hybridconnector_1 = require("./connectors/hybridconnector");
const udpconnector_1 = require("./connectors/udpconnector");
const mqttconnector_1 = require("./connectors/mqttconnector");
const sioconnector_1 = require("./connectors/sioconnector");
const direct_1 = require("./pushSchedulers/direct");
const buffer_1 = require("./pushSchedulers/buffer");
const connection_1 = require("./components/connection");
const connector_1 = require("./components/connector");
const dictionary_1 = require("./components/dictionary");
const master_1 = require("./components/master");
const monitor_1 = require("./components/monitor");
const protobuf_1 = require("./components/protobuf");
const proxy_1 = require("./components/proxy");
const pushScheduler_1 = require("./components/pushScheduler");
const remote_1 = require("./components/remote");
const server_1 = require("./components/server");
const session_1 = require("./components/session");
const toobusy_1 = require("./filters/rpc/toobusy");
const rpcLog_1 = require("./filters/rpc/rpcLog");
const toobusy_2 = require("./filters/handler/toobusy");
const time_1 = require("./filters/handler/time");
const serial_1 = require("./filters/handler/serial");
const timeout_1 = require("./filters/handler/timeout");
let Package = require('../../package');
const events_1 = require("./util/events");
const backendSession_1 = require("./components/backendSession");
const channel_1 = require("./components/channel");
/**
 * Expose `createApplication()`.
 *
 * @module
 */
class Pinus {
    constructor() {
        /**
         * Framework version.
         */
        this.version = Package.version;
        /**
         * Event definitions that would be emitted by app.event
         */
        this.events = events_1.default;
        /**
         * auto loaded components
         */
        this.components = {
            backendSession: backendSession_1.BackendSessionComponent,
            channel: channel_1.ChannelComponent,
            connection: connection_1.ConnectionComponent,
            connector: connector_1.ConnectorComponent,
            dictionary: dictionary_1.DictionaryComponent,
            master: master_1.MasterComponent,
            monitor: monitor_1.MonitorComponent,
            protobuf: protobuf_1.ProtobufComponent,
            proxy: proxy_1.ProxyComponent,
            pushScheduler: pushScheduler_1.PushSchedulerComponent,
            remote: remote_1.RemoteComponent,
            server: server_1.ServerComponent,
            session: session_1.SessionComponent,
        };
        /**
         * auto loaded filters
         */
        this.filters = {
            serial: serial_1.SerialFilter,
            time: time_1.TimeFilter,
            timeout: timeout_1.TimeoutFilter,
            toobusy: toobusy_2.ToobusyFilter,
        };
        /**
         * auto loaded rpc filters
         */
        this.rpcFilters = {
            rpcLog: rpcLog_1.RpcLogFilter,
            toobusy: toobusy_1.RpcToobusyFilter,
        };
        /**
         * connectors
         */
        this.connectors = {
            sioconnector: sioconnector_1.SIOConnector,
            hybridconnector: hybridconnector_1.HybridConnector,
            udpconnector: udpconnector_1.UDPConnector,
            mqttconnector: mqttconnector_1.MQTTConnector,
        };
        /**
         * pushSchedulers
         */
        this.pushSchedulers = {
            direct: direct_1.DirectPushScheduler,
            buffer: buffer_1.BufferPushScheduler,
        };
    }
    /**
     * Create an pinus application.
     *
     * @return {Application}
     * @memberOf Pinus
     * @api public
     */
    createApp(opts) {
        let app = new application_1.Application();
        app.init(opts);
        this._app = app;
        return app;
    }
    /**
     * Get application
     */
    get app() {
        return this._app;
    }
}
exports.Pinus = Pinus;
exports.pinus = new Pinus();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGludXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9saWIvcGludXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7O0dBSUc7O0FBT0gsK0NBQWdFO0FBR2hFLGtFQUErRDtBQUMvRCw0REFBeUQ7QUFDekQsOERBQTJEO0FBQzNELDREQUF5RDtBQUN6RCxvREFBOEQ7QUFDOUQsb0RBQThEO0FBRzlELHdEQUE4RDtBQUM5RCxzREFBNEQ7QUFDNUQsd0RBQThEO0FBQzlELGdEQUFzRDtBQUN0RCxrREFBd0Q7QUFDeEQsb0RBQTBEO0FBQzFELDhDQUFvRDtBQUNwRCw4REFBb0U7QUFDcEUsZ0RBQXNEO0FBQ3RELGdEQUFzRDtBQUN0RCxrREFBdUQ7QUFHdkQsbURBQXlEO0FBQ3pELGlEQUFvRDtBQUNwRCx1REFBMEQ7QUFDMUQsaURBQW9EO0FBQ3BELHFEQUF3RDtBQUN4RCx1REFBMEQ7QUFDMUQsSUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBRXZDLDBDQUFnRDtBQUNoRCxnRUFBc0U7QUFDdEUsa0RBQXdEO0FBQ3hEOzs7O0dBSUc7QUFFSDtJQTBFSTtRQXhFQTs7V0FFRztRQUVILFlBQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO1FBRTFCOztXQUVHO1FBQ0gsV0FBTSxHQUFHLGdCQUFNLENBQUM7UUFFaEI7O1dBRUc7UUFDSCxlQUFVLEdBQ1Y7WUFDSSxjQUFjLEVBQUcsd0NBQXVCO1lBQ3hDLE9BQU8sRUFBRywwQkFBZ0I7WUFDMUIsVUFBVSxFQUFHLGdDQUFtQjtZQUNoQyxTQUFTLEVBQUcsOEJBQWtCO1lBQzlCLFVBQVUsRUFBRyxnQ0FBbUI7WUFDaEMsTUFBTSxFQUFHLHdCQUFlO1lBQ3hCLE9BQU8sRUFBRywwQkFBZ0I7WUFDMUIsUUFBUSxFQUFHLDRCQUFpQjtZQUM1QixLQUFLLEVBQUcsc0JBQWM7WUFDdEIsYUFBYSxFQUFHLHNDQUFzQjtZQUN0QyxNQUFNLEVBQUcsd0JBQWU7WUFDeEIsTUFBTSxFQUFHLHdCQUFlO1lBQ3hCLE9BQU8sRUFBRywwQkFBZ0I7U0FDN0IsQ0FBQztRQUVGOztXQUVHO1FBQ0gsWUFBTyxHQUNQO1lBQ0ksTUFBTSxFQUFHLHFCQUFZO1lBQ3JCLElBQUksRUFBRyxpQkFBVTtZQUNqQixPQUFPLEVBQUcsdUJBQWE7WUFDdkIsT0FBTyxFQUFHLHVCQUFhO1NBQzFCLENBQUM7UUFFRjs7V0FFRztRQUNILGVBQVUsR0FDVDtZQUNHLE1BQU0sRUFBRyxxQkFBWTtZQUNyQixPQUFPLEVBQUcsMEJBQWdCO1NBQzdCLENBQUM7UUFHRjs7V0FFRztRQUNILGVBQVUsR0FDVDtZQUNHLFlBQVksRUFBRywyQkFBWTtZQUMzQixlQUFlLEVBQUcsaUNBQWU7WUFDakMsWUFBWSxFQUFHLDJCQUFZO1lBQzNCLGFBQWEsRUFBRyw2QkFBYTtTQUNoQyxDQUFDO1FBRUY7O1dBRUc7UUFDSCxtQkFBYyxHQUNkO1lBQ0ksTUFBTSxFQUFHLDRCQUFtQjtZQUM1QixNQUFNLEVBQUcsNEJBQW1CO1NBQy9CLENBQUM7SUFHRixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsU0FBUyxDQUFDLElBQTBCO1FBQ2hDLElBQUksR0FBRyxHQUFHLElBQUkseUJBQVcsRUFBRSxDQUFDO1FBQzVCLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztRQUNoQixPQUFPLEdBQUcsQ0FBQztJQUNmLENBQUM7SUFFRDs7T0FFRztJQUNILElBQUksR0FBRztRQUNILE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQztJQUNyQixDQUFDO0NBQ0o7QUFqR0Qsc0JBaUdDO0FBRVUsUUFBQSxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQyJ9